<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Leaflet Map with Route Generation</title>
	<meta name="viewport" content="initial-scale=1.0">

	<!-- Leaflet CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/leaflet/1.3.4/leaflet.css" />

	<!-- Our CSS -->
	<style>
		#map { height: 500px; }
	</style>
</head>
<body>
	<!-- Form for input fields and button -->
	<form>
		<label>From:</label>
		<input type="text" id="from" placeholder="Enter starting point" />
		<label>To:</label>
		<input type="text" id="to" placeholder="Enter destination" />
		<button type="button" id="calculate-route">Get Route</button>
	</form>

	<!-- Leaflet map container -->
	<div id="map"></div>

	<!-- Leaflet JS -->
	<script src="https://cdn.jsdelivr.net/leaflet/1.3.4/leaflet.js"></script>
	<!-- Leaflet Routing Machine JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-routing-machine/3.2.12/leaflet-routing-machine.js"></script>
	<!-- Our JS -->
	<script>
		// Initialize Leaflet map
		var map = L.map('map').setView([41.311280, 69.281693], 13);

		// Add Tile Layer
		L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={pk.eyJ1IjoiYmVra2kzIiwiYSI6ImNsaGtoMnU4bzBkMW8zcm9wZHVzZGNzeGgifQ.h3uGOBBP0No6fm3vwgI3Ww}', {
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
			maxZoom: 18,
			id: 'mapbox/satellite-v9',
			accessToken: 'YOUR_MAPBOX_ACCESS_TOKEN'
		}).addTo(map);

		// Initialize Leaflet Routing Machine
		var routing = L.Routing.control({
			waypoints: [
				L.latLng(41.311280, 69.281693),
				L.latLng(41.315230, 69.281361)
			],
			router: L.Routing.mapbox('YOUR_MAPBOX_ACCESS_TOKEN'),
			geocoder: L.Control.Geocoder.mapbox('YOUR_MAPBOX_ACCESS_TOKEN'),
			routeWhileDragging: true,
			lineOptions: {
				styles: [{ color: '#3388ff', weight: 6 }]
			},
			show: false
		}).addTo(map);

		// Function to calculate route when button is clicked
		function calculateRoute() {
			var from = document.getElementById('from').value;
			var to = document.getElementById('to').value;

			L.Routing.control({
				waypoints: [
					L.latLng(41.311280, 69.281693),
					L.latLng(41.315230, 69.281361)
				],
				router: L.Routing.mapbox('YOUR_MAPBOX_ACCESS_TOKEN'),
				geocoder: L.Control.Geocoder.mapbox('YOUR_MAPBOX_ACCESS_TOKEN'),
				routeWhileDragging: true,
				lineOptions: {
					styles: [{ color: '#3388ff', weight: 6 }]
				},
				show: false
			}).addTo(map);
		}

		// Set default route
		calculateRoute();

		// Attach calculateRoute function to button click
		document.getElementById('calculate-route').addEventListener('click', calculateRoute);
	</script>
</body>
</html>
